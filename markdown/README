# AutoScript

## Usage

1. 安装 Shizuku
2. 安装 AutoScript
3. 打开 AutoScript，点击 网易云脚本
4. 打开无障碍设置，运行 Shizuku 并授权
5. 点击 启动 运行脚本。


adb shell dumpsys activity | findstr mFocus


UI 层
 └─ Composable → ViewModel.startAutomation()

Domain 层
 └─ Executor.startAutomation()  // 业务逻辑

Data 层
 └─ A11yServiceRepo  // 封装系统服务状态与接口

System 层
 └─ A11yService / Shizuku  // 系统服务


ShizukuManager：处理 Shizuku 是否连接、是否授权、bindUserService、暴露 UserService 实例 等初始化操作
UserService：execShell、 tap 等高权限API
ShizukuRepository：管理 Shizuku 的状态和 UserService 实例
SHizukuTool：依赖 ShizukuRepository 中的  UserService 实例，通过  UserService 实例 编写 XML 解析 节点查找等操作。
exector：依赖 SHizukuTool ，编写具体的执行流程


┌───────────────┐
│     UI Layer   │  ← Compose / XML
└───────▲───────┘
        │ UiState / UiEvent
┌───────┴───────┐
│   ViewModel    │  ← 状态管理 + 调度
└───────▲───────┘
        │ 调用 UseCase
┌───────┴───────┐
│  Domain Layer  │  ← UseCase + Entity（纯 Kotlin）
└───────▲───────┘
        │ 调用 Repository
┌───────┴───────┐
│  Repository    │  ← 抽象数据来源
└───────▲───────┘
        │ 调用 DataSource
┌───────┴───────┐
│ Data Source    │  ← API / DB / System
└───────────────┘
